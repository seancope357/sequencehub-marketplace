# ============================================
# SUPABASE CONFIGURATION (Primary Platform)
# ============================================
# Get these from: https://supabase.com/dashboard → Your Project → Settings → API
NEXT_PUBLIC_SUPABASE_URL="https://xxxxxxxxxxxxx.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."  # Keep secret! Server-side only

# Database (Supabase PostgreSQL)
# Get from: Supabase Dashboard → Settings → Database → Connection string (URI)
# Format: postgresql://postgres:[YOUR-PASSWORD]@db.xxxxxxxxxxxxx.supabase.co:5432/postgres
DATABASE_URL="postgresql://postgres:[YOUR-PASSWORD]@db.xxxxxxxxxxxxx.supabase.co:5432/postgres"

# Legacy JWT (deprecated - Supabase Auth handles this now)
# JWT_SECRET="your-jwt-secret-key-change-in-production"

# Download Security
# Generate with: openssl rand -hex 32
DOWNLOAD_SECRET="your-download-secret-key-change-in-production"

# Stripe Payments & Connect
# Test keys (sk_test_) for development, Live keys (sk_live_) for production
# Get from: https://dashboard.stripe.com/test/apikeys
STRIPE_SECRET_KEY="sk_test_your_stripe_secret_key"
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_your_stripe_publishable_key"

# Stripe Webhook Secret
# Get from: Stripe Dashboard → Developers → Webhooks → Add endpoint
# Endpoint URL: https://yourdomain.com/api/webhooks/stripe
# Required events:
#   - checkout.session.completed
#   - payment_intent.succeeded
#   - charge.refunded
#   - account.updated (for Connect onboarding)
#   - account.application.deauthorized (for Connect)
#   - capability.updated (for Connect)
STRIPE_WEBHOOK_SECRET="whsec_your_webhook_secret"

# File Storage
# PRIMARY: Supabase Storage (configured via Supabase Dashboard → Storage)
# Buckets are created via migration: product-files, product-media, user-avatars
# No environment variables needed - uses Supabase client

# LEGACY: Cloudflare R2 Storage (deprecated - migrating to Supabase Storage)
# Leave commented out - kept for reference only
# R2_ENDPOINT="https://[account-id].r2.cloudflarestorage.com"
# R2_ACCESS_KEY_ID="your-r2-access-key-id"
# R2_SECRET_ACCESS_KEY="your-r2-secret-access-key"
# R2_BUCKET_NAME="sequencehub-files"

# Base URL (for production)
NEXT_PUBLIC_BASE_URL="http://localhost:3000"

# Node Environment
NODE_ENV="development"

# Rate Limiting
# Redis URL for distributed rate limiting (optional - uses in-memory if not set)
# REDIS_URL="redis://localhost:6379"

# Rate limit configuration overrides (optional - uses defaults if not set)
# Authentication
# RATE_LIMIT_AUTH_LOGIN_MAX=10
# RATE_LIMIT_AUTH_LOGIN_WINDOW=900
# RATE_LIMIT_AUTH_REGISTER_MAX=5
# RATE_LIMIT_AUTH_REGISTER_WINDOW=3600

# File operations
# RATE_LIMIT_UPLOAD_MAX=10
# RATE_LIMIT_UPLOAD_WINDOW=3600
# RATE_LIMIT_DOWNLOAD_MAX=10
# RATE_LIMIT_DOWNLOAD_WINDOW=86400

# Payment
# RATE_LIMIT_CHECKOUT_MAX=10
# RATE_LIMIT_CHECKOUT_WINDOW=3600

# Creator dashboard
# RATE_LIMIT_PRODUCT_CREATE_MAX=10
# RATE_LIMIT_PRODUCT_CREATE_WINDOW=3600
# RATE_LIMIT_STATS_MAX=60
# RATE_LIMIT_STATS_WINDOW=3600

# Rate limiting settings
# RATE_LIMIT_REDIS_PREFIX="rate_limit:"
# RATE_LIMIT_LOG_VIOLATIONS=true
# RATE_LIMIT_ALERT_THRESHOLD=5
# RATE_LIMIT_DISABLED=false  # Only set to true for testing!
